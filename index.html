<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Critics vs Audience: The Double Twist Story</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Playfair+Display:wght@400;600;700;900&family=Courier+Prime:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<!-- üîµ Vertical Page Navigation Dots -->
<div id="page-nav-dots"></div>

<body>
  <div id="container">

    <!-- PAGE 1: Title Page -->
    <section class="page" id="page1">
      <div class="film-grain"></div>
      <div
        style="display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; text-align:center; position:relative; z-index:2;">
        <h1 style="font-size:4rem; margin-bottom:15px; text-shadow: 3px 3px 6px rgba(0,0,0,0.3);">Critics vs Audience
        </h1>
        <div class="film-strip-divider"></div>
        <h2 style="font-size:2rem; font-weight:400; color:#8B4513; font-style:italic;">Exploring Movie Ratings from Both Sides</h2>

        <p class="section-desc" style="max-width:600px; margin-top:50px;">
          A visual journey through how critics and audiences respond to the same films.
        </p>

        <button class="load-more vintage-button" onclick="showNextPage(2, this)" style="margin-top:70px;">
          <span class="button-film-strip"></span>
          Start the Journey ‚Üì
        </button>
      </div>
    </section>

    <!-- PAGE 2: Guessing Game -->
    <section class="page hidden" id="page2">
      <div class="film-grain"></div>
      <div class="page-header">
        <h1>Critics vs Audience: Guess the Score!</h1>
        <div class="film-strip-divider"></div>
      </div>
      <p class="intro-text">
        Let's start with a little game! You'll see either the <strong>Audience Score</strong>
        or the <strong>Critic Score</strong> for a movie.
        Your goal is to guess the missing score. Ready?
      </p>

      <div id="guessing-carousel"></div>

      <button class="load-more vintage-button hidden" id="carousel-next-btn" onclick="showNextPage(3, this)">
        <span class="button-film-strip"></span>
        Load More ‚Üì
      </button>
    </section>


    <!-- PAGE 3: Outliers -->
    <section class="page hidden" id="page3">
      <div class="film-grain"></div>
      <div class="page-header">
        <h1>Sometimes the Opinions Diverge</h1>
        <div class="film-strip-divider"></div>
      </div>
      <p class="section-desc">
        From the guessing game, we saw that some movies land similarly with both groups while others drift apart.
        Here are a few notable cases where critics and audiences responded differently.
      </p>

      <div class="divergent-movies" style="display:flex; justify-content:space-around; gap:40px; margin-top:40px;">

      <!-- Last Jedi -->
      <div style="text-align:center; max-width:300px;">
        <img src="image/Star Wars.png" alt="Star Wars: The Last Jedi" style="width:100%; border-radius:6px;">
        <h3 style="margin-top:15px; color:#5D2E14;">Star Wars: The Last Jedi (2017)</h3>
        <p style="line-height:1.7;">
          Critics praised <em>The Last Jedi</em> for its bold storytelling choices and thematic depth.
          Many audience members felt it strayed from the saga‚Äôs established characters and tone.
          This divide reflects differing expectations about innovation versus tradition in a long-running franchise.
        </p>
      </div>

      <!-- The Greatest Showman -->
      <div style="text-align:center; max-width:300px;">
        <img src="image/The Greatest Showman.png" alt="The Greatest Showman" style="width:100%; border-radius:6px;">
        <h3 style="margin-top:15px; color:#5D2E14;">The Greatest Showman (2017)</h3>
        <p style="line-height:1.7;">
          Critics viewed <em>The Greatest Showman</em> as visually energetic but narratively simplified.
          Audiences connected strongly with its uplifting themes and memorable songs.
          The gap highlights how spectacle and feel-good storytelling can outweigh traditional critical criteria.
        </p>
      </div>

      <!-- Joker -->
      <div style="text-align:center; max-width:300px;">
        <img src="image/Joker.png" alt="Joker" style="width:100%; border-radius:6px;">
        <h3 style="margin-top:15px; color:#5D2E14;">Joker (2019)</h3>
        <p style="line-height:1.7;">
          Critics were divided over <em>Joker</em>‚Äôs tone and messaging.
          Many audience members praised its psychological depth and Joaquin Phoenix‚Äôs performance.
          The difference suggests viewers focused more on character study and emotional impact than controversy.
        </p>
      </div>

    </div>

      <p class="story-paragraph">
        These films give us a glimpse into how opinions can diverge.<br>
        Next, let‚Äôs see how their tastes compare when we look at their top-rated movies.
      </p>

      <button class="load-more vintage-button" onclick="showNextPage(4, this)">
        <span class="button-film-strip"></span>
        Load More ‚Üì
      </button>
    </section>


    <!-- PAGE 4: Venn -->
    <section class="page hidden" id="page4">
      <div class="film-grain"></div>
      <div class="page-header">
        <h1 id="venn-title">Top 50 Movies: Critic vs Audience</h1>
        <div class="film-strip-divider"></div>
      </div>

      
      <p class="section-desc">
        This chart shows how much overlap exists between the top-rated films of critics and audiences.<br>
        <strong><u>Adjust the slider to see how the intersection changes as we vary the number of movies.</u></strong>
      </p>
      
      <div class="chart-container" style="flex-direction:column;align-items:center;">
        <div id="venn-controls" style="margin-bottom:30px;">
          <label for="topNRange" class="vintage-label">Number of Movies:</label>
          <input type="range" id="topNRange" min="15" max="200" value="50" step="5" class="vintage-slider">
          <span id="topNValue" class="vintage-value">50</span>
        </div>
        <div id="venn"></div>
      </div>

      <div class="takeaways-box vintage-card">
      <p class="story-paragraph" style="max-width:650px;">
        Across the <strong>Top 15 to Top 80</strong>, <strong>only one film</strong> appears on both lists:
        <strong>Days and Nights in the Forest</strong>.<br>
        The next overlap doesn‚Äôt show up until the <strong>Top 85</strong> with
        <strong>Folklore: The Long Pond Studio Sessions</strong>.
        <br><br>
        These sparse intersections suggest that critics and audiences often favor
        <strong>very different films</strong> when highlighting their top picks.
      </p>
    </div>


      <p class="section-desc" style="margin-top:35px;">
        But what happens when we step back and look at the bigger picture?
      </p>

      <button class="load-more vintage-button" onclick="showNextPage(5, this)">
        <span class="button-film-strip"></span>
        Load More ‚Üì
      </button>
    </section>

    <!-- PAGE 5: Critics & Audiences Alignment Dashboard -->
    <section class="page hidden" id="page5" style="background-color:#F5E6D3; padding:60px 0;">
      <div class="film-grain"></div>
      <div style="max-width:950px; margin:auto; font-family:'Crimson Text', serif; position:relative; z-index:2;">

        <!-- Header -->
        <div class="page-header">
          <h1>The Bigger Picture: Critics and Audience</h1>
          <div class="film-strip-divider"></div>
        </div>
        <p class="section-desc">
          The extreme examples make critics and audiences seem far apart, but the broader trends tell a different story.
          Across decades and genres, both groups show surprisingly strong alignment ‚Äî from long-term trends
          to specific movie types. Let's explore how.
        </p>

        <!-- Charts Layout -->
        <div class="page5-grid">


          <!-- Left: Three Charts -->
          <div>

            <!-- Time Trend Chart -->
            <div class="chart-section vintage-card" style="margin-bottom:60px;">
              <h3 class="chart-title">
                Average Ratings Over Time
              </h3>
              <p class="chart-description">
                Over the past century, critics and audiences have followed similar rating trajectories. Their curves run
                nearly in <strong>parallel</strong>, especially after the 1980s, when access to films and film discourse became more widespread‚Äîsuggesting
                that both groups respond to major shifts in cinema in comparable ways.
              </p >
              <div id="chart-q2"></div>
            </div>

            <!-- Genre Charts Row -->
            <div class="chart-row" style="
                                display:flex;
                                justify-content:center;
                                align-items:flex-start;
                                gap:40px;
                                flex-wrap:nowrap;
                                max-width:1200px;
                                margin:0 auto;
                             ">

              <!-- Genre Differences -->
              <div class="chart-section vintage-card" style="flex:1; min-width:480px; max-width:600px;">
                <h3 class="chart-title">
                  Genre-Level Differences
                </h3>
                <p class="chart-description">
                  Across genres, the average score gap is typically under 5%, indicating that substantial disagreement is rare. 
                  Critics tend to favor <strong>Animation</strong> and
                  <strong>Comedy</strong>, while audiences lean slightly toward
                  <strong>Fantasy</strong> and <strong>Musicals</strong>.
                  Even so, these differences remain small and consistent across categories.
                  <strong><u>Click any bar to explore a genre interactively.</u></strong>
                </p >
                <div id="chart-q1"></div>
              </div>

              <!-- Within-Genre Agreement -->
              <div class="chart-section vintage-card" style="flex:1; min-width:480px; max-width:600px;">
                <h3 class="chart-title">
                  Within-Genre Agreement
                </h3>
                <p class="chart-description">
                  Within each genre, most films cluster <strong>close to the diagonal equality line</strong>, revealing that critics and audiences often
                  converge on what they consider strong or weak titles. The tight spread around the line highlights a generally shared
                  sense of quality.<br>
                </p >
                <div id="chart-scatter-multi"></div>
              </div>

            </div>

          </div>

        </div>

        <div class="takeaways-box vintage-card">
          <!-- <h3 style="color:#8B4513; font-size:1.4rem; margin-bottom:15px;">Key Takeaways</h3> -->
          <p>
          Across time, genres, and individual films, critics and audiences show far more alignment than the isolated disagreements might suggest.
          Disagreement exists, but it is modest, patterned, and rarely large enough to outweigh the broad consistency in how both
          groups evaluate movies.
          </p >
        </div>

        <button class="load-more vintage-button" onclick="showNextPage(6, this)" style="margin-top:40px;">
          <span class="button-film-strip"></span>
          Load More ‚Üì
        </button>
      </div>
    </section>


    <!-- PAGE 6: Conclusion -->
    <section class="page hidden" id="page6">
      <div class="film-grain"></div>
  
      <div class="page-header">
          <h1>So... Who Should You Trust?</h1>
          <div class="film-strip-divider"></div>
        </div>
      <p class="section-desc">
        After analyzing thousands of films across genres and decades, one pattern stands out:
        critics and audiences agree far more often than the disagreements suggest.
        You don‚Äôt have to choose ‚Äî both groups usually point to the same qualities in a good movie.
      </p>

      <p class="story-paragraph" style="margin-top:30px;">
        <strong>Now it's your turn!</strong> Use the interactive tool below to explore movies based on genre, score, timeline, and vote
        counts.
        The distributions and movie bubbles update automatically as you adjust the filters.
        Hover over a movie to see details, and export the filtered set as a CSV for deeper analysis.
      </p>
      <button class="load-more vintage-button" onclick="showNextPage(7, this)">
        <span class="button-film-strip"></span>
        Load More ‚Üì
      </button>
    </section>

    <!-- PAGE 7: Recommendation Tool -->
    <section class="page hidden" id="page7">
      <div class="film-grain"></div>
      <div id="recommendation-tool-container">
        <div id="rec-dashboard" style="background:#F5E6D3; padding:0;">
          <div class="topbar vintage-topbar">
            <div class="title">üéûÔ∏è Movie Recommendation Explorer</div>
            <div style="display:flex;gap:12px;align-items:center;">
              <div>
                <label class="smalllabel vintage-label">Genre</label>
                <select id="genre" class="selector vintage-select">
                  <option>All</option>
                </select>
              </div>
              <div>
                <label class="smalllabel vintage-label">Top N</label>
                <select id="topN" class="selector vintage-select">
                  <option value="5">Top 5</option>
                  <option value="10" selected>Top 10</option>
                  <option value="30">Top 30</option>
                </select>
              </div>
            </div>
          </div>

          <div class="layout">
            <div class="col-left">
              <div class="card vintage-card">
                <div class="smalllabel vintage-label">Vote distribution</div>
                <svg id="voteSvg" width="140" height="420"></svg>
              </div>
            </div>

            <div class="col-center">
              <div style="display:flex;gap:12px;">
                <div class="card vintage-card" style="flex:1;">
                  <div class="smalllabel vintage-label">Critic score distribution</div>
                  <svg id="criticSvg" width="420" height="140"></svg>
                </div>
                <div class="card vintage-card" style="flex:1;">
                  <div class="smalllabel vintage-label">Audience score distribution</div>
                  <svg id="audienceSvg" width="420" height="140"></svg>
                </div>
              </div>

              <div class="card vintage-card" style="flex:1;">
                <div class="smalllabel vintage-label">Timeline (release year)</div>
                <svg id="timeline" width="1000" height="420"></svg>
                <div class="legend vintage-legend" style="margin-top:6px;">
                  Bubble size = avg(critic,audience). X = release year.
                </div>
              </div>
            </div>

            <div class="col-right">
              <div class="card vintage-card">
                <div class="smalllabel vintage-label">Filters summary</div>
                <div style="margin-top:8px; color:#5D4037;">Votes: <span id="voteSummary" class="num">All</span></div>
                <div style="margin-top:8px; color:#5D4037;">Critic: <span id="critSummary" class="num">All</span></div>
                <div style="margin-top:8px; color:#5D4037;">Audience: <span id="audSummary" class="num">All</span></div>
              </div>

              <div class="card vintage-card" style="display:flex;flex-direction:column;align-items:center;gap:8px;">
                <div class="smalllabel vintage-label">Counts (filtered)</div>
                <div id="counts" class="counts">‚Äî</div>
                <button id="exportBtn" class="export-btn vintage-button">Export filtered CSV</button>
              </div>
            </div>
          </div>

          <div class="bottom-fixed">
            <div class="detail vintage-card">
              <div style="font-weight:700; color:#8B4513;">Hovered movie details</div>
              <div id="detailContent" style="margin-top:8px;color:#4A2C2A"></div>
            </div>
            <div class="table-area vintage-card">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
                <div style="font-weight:700; color:#8B4513;">Top N</div>
                <div style="font-size:12px;color:#8B7355;">rank = avg(critic,audience)</div>
              </div>
              <div id="tableWrap"></div>
            </div>
          </div>
        </div>
      </div>

      <p class="section-desc" style="margin-top:50px;">
        That's it ‚Äî you've uncovered the double twist:
        Critics and audiences aren't rivals.
        They're partners in shaping what great cinema means.
        Whether you trust critics, audiences, or your own heart ‚Äî
        the story of movies is one we all write together.
      </p>

      <p class="footer-note">Created by Team Yilin Jiang, Ylesia Wu, Mingjiao Diao</p>
      <div style="text-align:center; margin-top:50px; margin-bottom:60px;">
        <button id="reset-btn" class="load-more vintage-button">
          <span class="button-film-strip"></span>
          Back to Top ‚Üë
        </button>
      </div>
    </section>

  </div>

  <div class="tooltip vintage-tooltip" id="tooltip"></div>

  <script>
    //--------------------------------------------------
    // ‚úÖ ‚ÄúBack to Top ‚Üë‚Äù ÊåâÈíÆÈÄªËæëÔºöËøîÂõûÈ°∂ÈÉ®Âπ∂Â±ïÁ§∫ÊâÄÊúâÈ°µÈù¢
    //--------------------------------------------------

    document.addEventListener("DOMContentLoaded", () => {
      const resetBtn = document.getElementById("reset-btn");
      if (!resetBtn) return;

      // üü¢ ÁÇπÂáªÂêéË°å‰∏∫
      resetBtn.addEventListener("click", () => {
        // ‚úÖ ÊòæÁ§∫ÊâÄÊúâÈ°µÈù¢
        document.querySelectorAll(".page").forEach(p => p.classList.remove("hidden"));

        // ‚úÖ ÈöêËóèÊâÄÊúâ ‚ÄúLoad More‚Äù ÊåâÈíÆÔºàÂõ†‰∏∫ÈÉΩÂ±ïÂºÄ‰∫ÜÔºâ
        document.querySelectorAll(".load-more").forEach(btn => btn.style.display = "none");

        // ‚úÖ Âπ≥ÊªëÊªöÂä®Âà∞È°µÈù¢È°∂ÈÉ®
        setTimeout(() => {
          window.scrollTo({ top: 0, behavior: "smooth" });
        }, 150);

        // ‚úÖ Êõ¥Êñ∞ localStorageÔºå‰ΩøÂà∑Êñ∞Âêé‰ªç‰øùÊåÅÊâÄÊúâÈ°µÈù¢ÂèØËßÅ
        const totalPages = document.querySelectorAll(".page").length;
        localStorage.setItem("lastPage", totalPages);

        // ‚úÖ ‰øùËØÅ ‚ÄúBack to Top‚Äù ÊåâÈíÆ‰∏ç‰ºöË¢´ÈöêËóè
        resetBtn.style.display = "block";
      });
    });



  </script>

  <script src="script.js"></script>
</body>

</html>